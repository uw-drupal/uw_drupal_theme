{#
/**
 * @file
 * Theme override for a select element.
 *
 * Available variables:
 * - attributes: HTML attributes for the select tag.
 * - options: The option element children.
 *
 * @see template_preprocess_select()
 */
#}
{%
  set classes = [
    customtype == 'standard' ? 'form-control',
    customtype == 'custom' ? 'custom-select',
  ]
%}

{# 
  For the mobile-search-select field in the search block we don't
  want these added classes. There may be better ways to do this. Until
  we know more about whether we even want the Bootstrap Barrio added options, 
  this will suffice.
#}
{% if attributes['id'] == 'mobile-search-select' %}
{%   set classes = '' %}
{% endif %}

{% apply spaceless %}
  <select{{ attributes.addClass(classes) }}>
    {% for option in options %}
      {% if option.type == 'optgroup' %}
        <optgroup label="{{ option.label }}">
          {% for sub_option in option.options %}
            <option value="{{ sub_option.value }}"{{ sub_option.selected ? ' selected="selected"' }}>{{ sub_option.label }}</option>
          {% endfor %}
        </optgroup>
      {% elseif option.type == 'option' %}
        <option value="{{ option.value }}"{{ option.selected ? ' selected="selected"' }}>{{ option.label }}</option>
      {% endif %}
    {% endfor %}
  </select>
{% endapply %}
